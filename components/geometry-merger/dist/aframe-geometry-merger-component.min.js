!function(e){function r(o){if(t[o])return t[o].exports;var n=t[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){THREE.BufferGeometryUtils||t(1),AFRAME.registerComponent("geometry-merger",{schema:{preserveOriginal:{default:!1}},init:function(){var e=[];this.vertexIndex={};var r=this,t=0;this.el.object3D.updateMatrixWorld(),this.el.object3D.traverse(function(o){if("Mesh"===o.type&&o.el!==r.el){for(var n=o.geometry.clone(),i=o;i!==r.el.object3D;)n.applyMatrix4(i.parent.matrix),i=i.parent;e.push(n),meshPositions=o.geometry.getAttribute("position"),r.vertexIndex[o.parent.uuid]=[t,t+meshPositions.count-1],t+=meshPositions.count,r.data.preserveOriginal||o.parent.remove(o)}}),this.geometry=THREE.BufferGeometryUtils.mergeBufferGeometries(e),this.mesh=new THREE.Mesh(this.geometry),this.el.setObject3D("mesh",this.mesh)},getColor:function(e,r){const t=this.geometry.getAttribute("color");r.fromBufferAttribute(t,this.vertexIndex[e][0])},setColor:function(e,r){const t=this.vertexIndex[e];this.setColorOverVertexRange(t[0],t[1],r)},setColorOverVertexRange:function(){const e=new THREE.Color;return function(r,t,o){var n,i=this.geometry;const a=i.getAttribute("color"),u=a.itemSize,s=a.array;for(e.set(o),n=3*r;n<=3*t;n+=u)s[n]=e.r,s[n+1]=e.g,s[n+2]=e.b;a.needsUpdate=!0}}()})},function(e,r){THREE.BufferGeometryUtils={computeTangents:function(e){function r(e,r,t){v.fromArray(a,3*e),h.fromArray(a,3*r),y.fromArray(a,3*t),g.fromArray(s,2*e),E.fromArray(s,2*r),p.fromArray(s,2*t);var o=h.x-v.x,n=y.x-v.x,i=h.y-v.y,u=y.y-v.y,f=h.z-v.z,l=y.z-v.z,d=E.x-g.x,A=p.x-g.x,R=E.y-g.y,T=p.y-g.y,w=1/(d*T-A*R);b.set((T*o-R*n)*w,(T*i-R*u)*w,(T*f-R*l)*w),x.set((d*n-A*o)*w,(d*u-A*i)*w,(d*l-A*f)*w),c[e].add(b),c[r].add(b),c[t].add(b),m[e].add(x),m[r].add(x),m[t].add(x)}function t(e){j.fromArray(u,3*e),C.copy(j),z=c[e],O.copy(z),O.sub(j.multiplyScalar(j.dot(z))).normalize(),U.crossVectors(C,z),G=U.dot(m[e]),D=G<0?-1:1,l[4*e]=O.x,l[4*e+1]=O.y,l[4*e+2]=O.z,l[4*e+3]=D}var o=e.index,n=e.attributes;if(null===o||void 0===n.position||void 0===n.normal||void 0===n.uv)return void console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var i=o.array,a=n.position.array,u=n.normal.array,s=n.uv.array,f=a.length/3;void 0===n.tangent&&e.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*f),4));for(var l=n.tangent.array,c=[],m=[],d=0;d<f;d++)c[d]=new THREE.Vector3,m[d]=new THREE.Vector3;var v=new THREE.Vector3,h=new THREE.Vector3,y=new THREE.Vector3,g=new THREE.Vector2,E=new THREE.Vector2,p=new THREE.Vector2,b=new THREE.Vector3,x=new THREE.Vector3,A=e.groups;0===A.length&&(A=[{start:0,count:i.length}]);for(var d=0,R=A.length;d<R;++d)for(var T=A[d],w=T.start,H=T.count,V=w,B=w+H;V<B;V+=3)r(i[V+0],i[V+1],i[V+2]);for(var D,z,G,O=new THREE.Vector3,U=new THREE.Vector3,j=new THREE.Vector3,C=new THREE.Vector3,d=0,R=A.length;d<R;++d)for(var T=A[d],w=T.start,H=T.count,V=w,B=w+H;V<B;V+=3)t(i[V+0]),t(i[V+1]),t(i[V+2])},mergeBufferGeometries:function(e,r){for(var t=null!==e[0].index,o=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),i={},a={},u=new THREE.BufferGeometry,s=0,f=0;f<e.length;++f){var l=e[f];if(t!==(null!==l.index))return null;for(var c in l.attributes){if(!o.has(c))return null;void 0===i[c]&&(i[c]=[]),i[c].push(l.attributes[c])}for(var c in l.morphAttributes){if(!n.has(c))return null;void 0===a[c]&&(a[c]=[]),a[c].push(l.morphAttributes[c])}if(u.userData&&(u.userData.mergedUserData=u.userData.mergedUserData||[],u.userData.mergedUserData.push(l.userData)),r){var m;if(t)m=l.index.count;else{if(void 0===l.attributes.position)return null;m=l.attributes.position.count}u.addGroup(s,m,f),s+=m}}if(t){for(var d=0,v=[],f=0;f<e.length;++f){for(var h=e[f].index,y=0;y<h.count;++y)v.push(h.getX(y)+d);d+=e[f].attributes.position.count}u.setIndex(v)}for(var c in i){var g=this.mergeBufferAttributes(i[c]);if(!g)return null;u.addAttribute(c,g)}for(var c in a){var E=a[c][0].length;if(0===E)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[c]=[];for(var f=0;f<E;++f){for(var p=[],y=0;y<a[c].length;++y)p.push(a[c][y][f]);var b=this.mergeBufferAttributes(p);if(!b)return null;u.morphAttributes[c].push(b)}}return u},mergeBufferAttributes:function(e){for(var r,t,o,n=0,i=0;i<e.length;++i){var a=e[i];if(a.isInterleavedBufferAttribute)return null;if(void 0===r&&(r=a.array.constructor),r!==a.array.constructor)return null;if(void 0===t&&(t=a.itemSize),t!==a.itemSize)return null;if(void 0===o&&(o=a.normalized),o!==a.normalized)return null;n+=a.array.length}for(var u=new r(n),s=0,i=0;i<e.length;++i)u.set(e[i].array,s),s+=e[i].array.length;return new THREE.BufferAttribute(u,t,o)}}}]);